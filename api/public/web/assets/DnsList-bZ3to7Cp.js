import{d as _,r as h,a as x,p as b,g as v,b as n,c as C,o as V,w as s,e as a,m as w,f as r,t as d,V as u,h as y,_ as R}from"./index-3BgIhvjf.js";const k=_({__name:"DnsList",setup($){const c=h(),m=x({id:"DnsList",height:"100%",stripe:!0,keepSource:!0,showOverflow:!0,rowConfig:{isHover:!0},sortConfig:{remote:!0,multiple:!0},editConfig:{mode:"row",showStatus:!0,trigger:"dblclick"},editRules:{name:[{required:!0,message:"请输入名称"}]},customConfig:{storage:!0},toolbarConfig:{refresh:!0,zoom:!0,buttons:[{name:"新增",code:"insert_edit",status:"primary",icon:"vxe-icon-add"},{name:"标记/删除",code:"mark_cancel",status:"error",icon:"vxe-icon-delete"},{name:"保存",code:"save",status:"success",icon:"vxe-icon-save"}]},pagerConfig:{enabled:!1},columns:[{type:"checkbox",width:60},{type:"seq",width:60},{field:"protocol",title:"HTTP协议",sortable:!0,width:110,cellRender:{name:"VxeSwitch",props:{size:"mini",openLabel:"HTTPS",closeLabel:"HTTP",openValue:"https",closeValue:"http",class:"protocol-switch"}}},{field:"domain",title:"本地映射域名",sortable:!0,width:300,slots:{default:"domain"},editRender:{name:"VxeInput"}},{field:"ip",title:"映射IP",sortable:!0,width:150,editRender:{name:"VxeInput"}},{field:"port",title:"映射端口",sortable:!0,width:120,editRender:{name:"VxeInput"}},{field:"status",title:"启用状态",sortable:!0,width:110,align:"center",cellRender:{name:"VxeSwitch",props:{size:"mini",openLabel:"启用",closeLabel:"停用",openValue:1,closeValue:0}}},{field:"description",title:"描述",minWidth:200,slots:{default:"description"}},{field:"updatedAt",title:"更新时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"createdAt",title:"创建时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"action",title:"操作",width:160,slots:{default:"action"}}],proxyConfig:{form:!1,sort:!0,ajax:{query({sorts:o}){const e={orderBy:o.map(i=>`${i.field}|${i.order}`).join(",")};return v(e)},save({body:o}){return b({...o})}}}}),p=async o=>{const e=c.value;if(e&&e.isInsertByRow(o)){e.remove(o);return}await u.modal.confirm({content:`请确认是否删除 “ ${o.domain} ”？
描述： ${o.description}`})==="confirm"&&y({id:o.id}).then(l=>{e&&e.commitProxy("query"),u.modal.message({content:l.message,status:"success"})})};return(o,e)=>{const i=n("vxe-link"),l=n("vxe-button"),f=n("vxe-grid"),g=n("PageView");return V(),C(g,null,{default:s(()=>[a(f,w({ref_key:"gridRef",ref:c},m),{domain:s(({row:t})=>[a(i,{href:`${t.protocol}://${t.domain}:${t.port}`,target:"_blank"},{default:s(()=>[r(d(t.domain),1)]),_:2},1032,["href"])]),description:s(({row:t})=>[e[0]||(e[0]=r(" 本地域名 ",-1)),a(i,{href:`${t.protocol}://${t.domain}:${t.port}`,target:"_blank"},{default:s(()=>[r(d(t.domain),1)]),_:2},1032,["href"]),r(" 映射到 "+d(t.ip),1)]),action:s(({row:t})=>[a(l,{mode:"text",status:"error",icon:"vxe-icon-delete",onClick:T=>p(t)},{default:s(()=>[...e[1]||(e[1]=[r("删除",-1)])]),_:1},8,["onClick"])]),_:1},16)]),_:1})}}}),I=R(k,[["__scopeId","data-v-5b65ecb9"]]);export{I as default};
