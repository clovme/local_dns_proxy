import{d as f,r as p,a as g,p as x,g as v,b as r,c as _,o as h,w as i,e as a,m as w,f as b,V as d,h as C}from"./index-kST2yqdn.js";const D=f({__name:"DnsList",setup(y){const n=p(),c=g({id:"DnsList",height:"100%",keepSource:!0,showOverflow:!0,rowConfig:{isHover:!0},sortConfig:{remote:!0,multiple:!0},editConfig:{mode:"row",showStatus:!0,trigger:"dblclick"},editRules:{name:[{required:!0,message:"请输入名称"}]},customConfig:{storage:!0},toolbarConfig:{refresh:!0,zoom:!0,buttons:[{name:"新增",code:"insert_edit",status:"primary",icon:"vxe-icon-add"},{name:"标记/删除",code:"mark_cancel",status:"error",icon:"vxe-icon-delete"},{name:"保存",code:"save",status:"success",icon:"vxe-icon-save"}]},pagerConfig:{enabled:!1},columns:[{type:"checkbox",width:60},{type:"seq",width:60},{field:"domain",title:"本地映射域名",sortable:!0,width:200,editRender:{name:"VxeInput"}},{field:"ip",title:"映射IP",sortable:!0,width:200,editRender:{name:"VxeInput"}},{field:"status",title:"启用状态",sortable:!0,width:200,cellRender:{name:"VxeSwitch",props:{size:"mini",openLabel:"启用",closeLabel:"停用",openValue:1,closeValue:0}}},{field:"description",title:"说明",minWidth:200,editRender:{name:"VxeInput"}},{field:"updatedAt",title:"更新时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"createdAt",title:"创建时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"action",title:"操作",width:160,slots:{default:"action"}}],proxyConfig:{form:!1,sort:!0,ajax:{query({sorts:e}){const t={orderBy:e.map(o=>`${o.field}|${o.order}`).join(",")};return v(t)},save({body:e}){return x({...e})}}}}),l=async e=>{const t=n.value;if(t&&t.isInsertByRow(e)){t.remove(e);return}await d.modal.confirm({content:`请确认是否删除 “ ${e.domain} ”？
描述： ${e.description}`})==="confirm"&&C({id:e.id}).then(s=>{t&&t.commitProxy("query"),d.modal.message({content:s.message,status:"success"})})};return(e,t)=>{const o=r("vxe-button"),s=r("vxe-grid"),u=r("PageView");return h(),_(u,null,{default:i(()=>[a(s,w({ref_key:"gridRef",ref:n},c),{action:i(({row:m})=>[a(o,{mode:"text",status:"error",icon:"vxe-icon-delete",onClick:R=>l(m),"permission-code":"dnsActionDelete"},{default:i(()=>[...t[0]||(t[0]=[b("删除",-1)])]),_:1},8,["onClick"])]),_:1},16)]),_:1})}}});export{D as default};
