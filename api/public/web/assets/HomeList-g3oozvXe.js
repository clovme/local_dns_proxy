import{r as a,d as g,a as x,b as _,V as i,c as r,e as h,o as v,w as s,f as m,m as b,g as w}from"./index-CdczlUCB.js";function C(o){return a({url:`/page/${o.pageSize}/${o.currentPage}`,method:"get",params:o})}function y(o){return a({url:"/api/pub/admin/demo/save/batch",method:"post",data:o})}function A(o){return a({url:"/api/pub/admin/demo/delete",method:"delete",data:o})}const I=g({__name:"HomeList",setup(o){const d=x(),c=_({id:"HomeList",height:"100%",keepSource:!0,showOverflow:!0,rowConfig:{isHover:!0},sortConfig:{remote:!0,multiple:!0},editConfig:{mode:"row",showStatus:!0,enabled:i.permission.checkVisible("demoOneActionInsert|demoOneActionUpdate")},editRules:{name:[{required:!0,message:"请输入名称"}]},customConfig:{storage:!0},toolbarConfig:{refresh:!0,zoom:!0,buttons:[{name:"新增",code:"insert_edit",status:"primary",icon:"vxe-icon-add",permissionCode:"demoOneActionInsert"},{name:"标记/删除",code:"mark_cancel",status:"error",icon:"vxe-icon-delete",permissionCode:"demoOneActionDelete"},{name:"保存",code:"save",status:"success",icon:"vxe-icon-save",permissionCode:"demoOneActionInsert|demoOneActionDelete|demoOneActionUpdate"}]},pagerConfig:{},columns:[{type:"checkbox",width:60},{field:"name",title:"域名",sortable:!0,minWidth:100,editRender:{name:"VxeInput"}},{field:"code",title:"IP",sortable:!0,width:100,editRender:{name:"VxeInput"}},{field:"amount",title:"状态",sortable:!0,width:200,editRender:{name:"VxeNumberInput"}},{field:"nickname",title:"说明",width:200,editRender:{name:"VxeInput"}},{field:"updateTime",title:"更新时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"createTime",title:"创建时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"action",title:"操作",width:160,slots:{default:"action"}}],proxyConfig:{form:!1,sort:!0,ajax:{query({sorts:t}){const e={orderBy:t.map(n=>`${n.field}|${n.order}`).join(",")};return C(e)},save({body:t}){return y({...t})}}}}),u=async t=>{const e=d.value;if(e&&e.isInsertByRow(t)){e.remove(t);return}await i.modal.confirm({content:`请确认是否删除 “ ${t.name} ”？`})==="confirm"&&A({_id:t._id}).then(()=>{e&&e.commitProxy("query"),i.modal.message({content:"删除成功",status:"success"})})};return(t,e)=>{const n=r("vxe-button"),l=r("vxe-grid"),f=r("PageView");return v(),h(f,null,{default:s(()=>[m(l,b({ref_key:"gridRef",ref:d},c),{action:s(({row:p})=>[m(n,{mode:"text",status:"error",icon:"vxe-icon-delete",onClick:V=>u(p),"permission-code":"demoOneActionDelete"},{default:s(()=>[...e[0]||(e[0]=[w("删除",-1)])]),_:1},8,["onClick"])]),_:1},16)]),_:1})}}});export{I as default};
