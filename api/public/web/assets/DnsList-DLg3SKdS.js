import{d as x,r as _,a as h,p as v,g as b,b as s,c as y,o as C,w as i,e as a,m as k,f as n,t as l,V as u,h as V}from"./index-Dlz-QBqe.js";const I=x({__name:"DnsList",setup(w){const c=_(),m=h({id:"DnsList",height:"100%",stripe:!0,keepSource:!0,showOverflow:!0,rowConfig:{isHover:!0},sortConfig:{remote:!0,multiple:!0},editConfig:{mode:"row",showStatus:!0,trigger:"dblclick"},editRules:{name:[{required:!0,message:"请输入名称"}]},customConfig:{storage:!0},toolbarConfig:{refresh:!0,zoom:!0,buttons:[{name:"新增",code:"insert_edit",status:"primary",icon:"vxe-icon-add"},{name:"标记/删除",code:"mark_cancel",status:"error",icon:"vxe-icon-delete"},{name:"保存",code:"save",status:"success",icon:"vxe-icon-save"}]},pagerConfig:{enabled:!1},columns:[{type:"checkbox",width:60},{type:"seq",width:60},{field:"protocol",title:"HTTP协议",sortable:!0,width:125,editRender:{name:"VxeInput"}},{field:"domain",title:"本地映射域名",sortable:!0,width:350,slots:{default:"domain"},editRender:{name:"VxeInput"}},{field:"ip",title:"映射IP",sortable:!0,width:150,editRender:{name:"VxeInput"}},{field:"port",title:"映射端口",sortable:!0,width:120,editRender:{name:"VxeInput"}},{field:"status",title:"启用状态",sortable:!0,width:120,align:"center",cellRender:{name:"VxeSwitch",props:{size:"mini",openLabel:"启用",closeLabel:"停用",openValue:1,closeValue:0}}},{field:"description",title:"描述",minWidth:200,slots:{default:"description"}},{field:"updatedAt",title:"更新时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"createdAt",title:"创建时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"action",title:"操作",width:160,slots:{default:"action"}}],proxyConfig:{form:!1,sort:!0,ajax:{query({sorts:o}){const e={orderBy:o.map(r=>`${r.field}|${r.order}`).join(",")};return b(e)},save({body:o}){return v({...o})}}}}),f=async o=>{const e=c.value;if(e&&e.isInsertByRow(o)){e.remove(o);return}await u.modal.confirm({content:`请确认是否删除 “ ${o.domain} ”？
描述： ${o.description}`})==="confirm"&&V({id:o.id}).then(d=>{e&&e.commitProxy("query"),u.modal.message({content:d.message,status:"success"})})};return(o,e)=>{const r=s("vxe-link"),d=s("vxe-button"),p=s("vxe-grid"),g=s("PageView");return C(),y(g,null,{default:i(()=>[a(p,k({ref_key:"gridRef",ref:c},m),{domain:i(({row:t})=>[a(r,{href:`${t.protocol}://${t.domain}:${t.port}`,target:"_blank"},{default:i(()=>[n(l(t.domain),1)]),_:2},1032,["href"])]),description:i(({row:t})=>[e[0]||(e[0]=n(" 本地域名 ",-1)),a(r,{href:`${t.protocol}://${t.domain}:${t.port}`,target:"_blank"},{default:i(()=>[n(l(t.domain),1)]),_:2},1032,["href"]),n(" 映射到 "+l(t.ip),1)]),action:i(({row:t})=>[a(d,{mode:"text",status:"error",icon:"vxe-icon-delete",onClick:$=>f(t)},{default:i(()=>[...e[1]||(e[1]=[n("删除",-1)])]),_:1},8,["onClick"])]),_:1},16)]),_:1})}}});export{I as default};
