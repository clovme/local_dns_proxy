import{d as v,r as b,a as y,p as k,g as C,b as a,c as r,o as l,w as s,e as m,m as V,f as n,t as d,V as p,h as R,_ as $}from"./index-DgGGQttf.js";const w=v({__name:"DnsList",setup(D){const u=b(),f=y({id:"DnsList",height:"100%",stripe:!0,keepSource:!0,showOverflow:!0,rowConfig:{isHover:!0},sortConfig:{remote:!0,multiple:!0},editConfig:{mode:"row",showStatus:!0,trigger:"dblclick"},editRules:{name:[{required:!0,message:"请输入名称"}]},customConfig:{storage:!0},toolbarConfig:{refresh:!0,zoom:!0,buttons:[{name:"新增",code:"insert_edit",status:"primary",icon:"vxe-icon-add"},{name:"标记/删除",code:"mark_cancel",status:"error",icon:"vxe-icon-delete"},{name:"保存",code:"save",status:"success",icon:"vxe-icon-save"}]},pagerConfig:{enabled:!1},columns:[{type:"checkbox",width:60},{type:"seq",width:60},{field:"protocol",title:"HTTP协议",sortable:!0,width:110,cellRender:{name:"VxeSwitch",props:{size:"mini",openLabel:"HTTPS",closeLabel:"HTTP",openValue:"https",closeValue:"http",class:"protocol-switch"}}},{field:"domain",title:"本地映射域名",sortable:!0,width:300,slots:{default:"domain"},editRender:{name:"VxeInput"}},{field:"ip",title:"映射IP",sortable:!0,width:150,editRender:{name:"VxeInput"}},{field:"port",title:"映射端口",sortable:!0,width:120,editRender:{name:"VxeInput"}},{field:"status",title:"启用状态",sortable:!0,width:110,align:"center",cellRender:{name:"VxeSwitch",props:{size:"mini",openLabel:"启用",closeLabel:"停用",openValue:1,closeValue:0}}},{field:"description",title:"描述",minWidth:200,slots:{default:"description"}},{field:"updatedAt",title:"更新时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"createdAt",title:"创建时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"action",title:"操作",width:160,slots:{default:"action"}}],proxyConfig:{form:!1,sort:!0,ajax:{query({sorts:o}){const t={orderBy:o.map(i=>`${i.field}|${i.order}`).join(",")};return C(t)},save({body:o}){return k({...o})}}}}),_=async o=>{const t=u.value;if(t&&t.isInsertByRow(o)){t.remove(o);return}await p.modal.confirm({content:`请确认是否删除 “ ${o.domain} ”？
描述： ${o.description}`})==="confirm"&&R({id:o.id}).then(c=>{t&&t.commitProxy("query"),p.modal.message({content:c.message,status:"success"})})};return(o,t)=>{const i=a("vxe-link"),c=a("vxe-text"),g=a("vxe-button"),x=a("vxe-grid"),h=a("PageView");return l(),r(h,null,{default:s(()=>[m(x,V({ref_key:"gridRef",ref:u},f),{domain:s(({row:e})=>[e.status===1?(l(),r(i,{key:0,href:`${e.protocol}://${e.domain}:${e.port}`,target:"_blank"},{default:s(()=>[n(d(e.domain),1)]),_:2},1032,["href"])):(l(),r(c,{key:1},{default:s(()=>[n(d(e.domain),1)]),_:2},1024))]),description:s(({row:e})=>[t[0]||(t[0]=n(" 本地域名 ",-1)),e.status===1?(l(),r(i,{key:0,href:`${e.protocol}://${e.domain}:${e.port}`,target:"_blank"},{default:s(()=>[n(d(e.domain),1)]),_:2},1032,["href"])):(l(),r(c,{key:1},{default:s(()=>[n(d(e.domain),1)]),_:2},1024)),n(" 映射到 "+d(e.ip),1)]),action:s(({row:e})=>[m(g,{mode:"text",status:"error",icon:"vxe-icon-delete",onClick:L=>_(e)},{default:s(()=>[...t[1]||(t[1]=[n("删除",-1)])]),_:1},8,["onClick"])]),_:1},16)]),_:1})}}}),S=$(w,[["__scopeId","data-v-a5759c36"]]);export{S as default};
